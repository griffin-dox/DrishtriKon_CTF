# ===================================
# DrishtriKon CTF Platform - Environment Configuration
# ===================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ===================================
# Flask Configuration
# ===================================
FLASK_ENV=production                    # Options: development, production, testing
FLASK_DEBUG=0                           # Set to 1 for development only
PORT=5000                               # Application port

# ===================================
# Security Secrets (REQUIRED)
# ===================================
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=your-secret-key-min-32-chars-change-this
SESSION_SECRET=your-session-secret-min-32-chars-change-this

# ===================================
# Database Configuration (REQUIRED)
# ===================================
# PostgreSQL connection string
DATABASE_URL=postgresql://user:password@localhost:5432/drishtrikon_ctf

# For Docker deployment:
# DATABASE_URL=postgresql://user:password@db:5432/drishtrikon_ctf

POSTGRES_DB=drishtrikon_ctf
POSTGRES_USER=ctf_user
POSTGRES_PASSWORD=secure-database-password

# ===================================
# Email Configuration (REQUIRED for OTP)
# ===================================
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-specific-password
MAIL_DEFAULT_SENDER=noreply@your-domain.com

# Gmail App Password: https://support.google.com/accounts/answer/185833

# ===================================
# AWS S3 File Storage (Optional but Recommended)
# ===================================
# For storing user/team profile pictures and challenge files
# Get credentials from AWS IAM: https://console.aws.amazon.com/iam/
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_REGION=us-east-1                    # Your S3 bucket region
AWS_PROFILE_BUCKET=your-profile-bucket-name    # For user/team avatars and badges
AWS_CHALLENGE_BUCKET=your-challenge-bucket-name # For challenge files

# S3 Bucket Permissions Required:
# - s3:PutObject (upload files)
# - s3:GetObject (download files)
# - s3:DeleteObject (delete files)
# - s3:ListBucket (list bucket contents)

# ===================================
# reCAPTCHA v3 (Recommended)
# ===================================
# Get keys from: https://www.google.com/recaptcha/admin
RECAPTCHA_SITE_KEY=your-recaptcha-site-key
RECAPTCHA_SECRET_KEY=your-recaptcha-secret-key

# ===================================
# Cache Configuration
# ===================================
CACHE_TYPE=filesystem                   # Options: simple, filesystem, redis
CACHE_DIR=var/cache                    # For filesystem cache

# For Redis cache:
# CACHE_TYPE=redis
# REDIS_URL=redis://:password@localhost:6379/0
# REDIS_PASSWORD=your-redis-password

# ===================================
# External Services
# ===================================
# Formcarry contact form
FORMCARRY_ENDPOINT=https://formcarry.com/s/your-endpoint

# Discord webhook for security alerts
DISCORD_SECURITY_WEBHOOK_URL=https://discord.com/api/webhooks/your-webhook-url

# ===================================
# Health Check Configuration
# ===================================
HEALTHCHECK_SAMPLE_RATE=0.1             # 10% sampling for health checks
HEALTHCHECK_COOLDOWN_SECONDS=600        # 10 minutes cooldown per IP
HEALTHCHECK_PATH=.                      # Path to check disk usage

# ===================================
# Session & Security
# ===================================
SESSION_TIMEOUT=1800                    # 30 minutes in seconds
SESSION_COOKIE_SECURE=True              # Set to False for local dev without HTTPS
MAX_CONTENT_LENGTH=16777216             # 16MB in bytes

# ===================================
# Docker & Deployment
# ===================================
# Docker Compose settings
WEB_PORT=8000
HTTP_PORT=80
HTTPS_PORT=443

# Nginx settings
NGINX_CLIENT_MAX_BODY_SIZE=16M

# ===================================
# Development Only
# ===================================
# Override in development mode
# FLASK_ENV=development
# FLASK_DEBUG=1
# SESSION_COOKIE_SECURE=False
# DATABASE_URL=postgresql://dev_user:dev_password@localhost:5432/drishtrikon_dev

# ===================================
# Optional: Performance & Monitoring
# ===================================
# Gunicorn workers (Docker)
GUNICORN_WORKERS=4
GUNICORN_THREADS=2
GUNICORN_TIMEOUT=60

# Logging
LOG_LEVEL=INFO                          # DEBUG, INFO, WARNING, ERROR, CRITICAL
